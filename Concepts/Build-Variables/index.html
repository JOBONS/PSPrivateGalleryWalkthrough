<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <meta name="author" content="Mike Lombardi"> 
    <link rel="canonical" href="https://michaeltlombardi.github.io/PSPrivateGalleryWalkthrough/Concepts/Build-Variables/"> 
    <link rel="shortcut icon" href="../../img/favicon.ico">

    <title>Build Variables - PS Private Gallery Walkthrough</title>

    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../css/base.css" rel="stylesheet">
    <link href="../../css/psinder.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../..">PS Private Gallery Walkthrough</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">About</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../Getting-Started/">Getting Started</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Step-By-Step <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../Step-By-Step/1-Adding-Your-Fork-to-VSTS/">1. Adding Your Fork to VSTS</a>
</li>

                        
                            
<li >
    <a href="../../Step-By-Step/2-Adding-Azure-to-VSTS/">2. Adding Azure to VSTS</a>
</li>

                        
                            
<li >
    <a href="../../Step-By-Step/3-Defining-Your-VSTS-Build/">3. Defining Your VSTS-Build</a>
</li>

                        
                            
<li >
    <a href="../../Step-By-Step/4-Deploying-And-Registering-Your-Private-Gallery/">4. Deploying and Registering Your Private Gallery</a>
</li>

                        
                            
<li >
    <a href="../../Step-By-Step/5-Publishing-To-Your-Private-Gallery/">5. Publishing To Your Private Gallery</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Concepts <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li class="active">
    <a href="./">Build Variables</a>
</li>

                        
                            
<li >
    <a href="../The-PowerShell-Private-Gallery-Configurations/">The Configurations</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../../Step-By-Step/5-Publishing-To-Your-Private-Gallery/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../The-PowerShell-Private-Gallery-Configurations/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/michaeltlombardi/PSPrivateGalleryWalkthrough">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3">
            
                <div class="tags hidden-print" id="tags">
                
                    <span class="label label-info">concept</span>
                
                    <span class="label label-info">vsts</span>
                
                    <span class="label label-info">build</span>
                
                </div>
            
            <div class="bs-sidebar hidden-print affix well" role="complementary" id="sideNav">
    <ul class="nav bs-sidenav">
    
        <li class="first-level active"><a href="#build-variables">Build Variables</a></li>
        
            <li class="second-level"><a href="#naming-build-variables">Naming Build Variables</a></li>
            
        
            <li class="second-level"><a href="#allow-at-queue-time">Allow at Queue Time</a></li>
            
        
            <li class="second-level"><a href="#secrets">Secrets</a></li>
            
        
    
    </ul>
</div>
        </div>
        <div class="col-md-9" role="main">
            

<h1 id="build-variables">Build Variables</h1>
<p>Build variables are where most of the not-magic happens in our build process.
They're what we're using (in this case) to deploy our infrastructure.</p>
<p>However, in a true infrastructure-as-code deployment, we'd use <em>much</em> fewer build variables - essentially, only keeping our secrets (user passwords, API keys, etc) in the build variables.</p>
<p>The reason for this is twofold:</p>
<ol>
<li>Build Variables can't transfer to a different build system easily.
If you ever decide to use <a href="http://www.appveyor.com/">AppVeyor</a>, <a href="https://travis-ci.org/">Travis CI</a>, <a href="https://jenkins.io/index.html">Jenkins</a>, or another continuous integration build system, you will have to define all of the same variables for those builds as well.</li>
<li>Changes to Build Variables don't reside in your source control repository and can't be versioned with the templates, configurations, and helper scripts.
This means, necessarily, adding a build variabls changelog to your source control repository or splitting your source of truth for builds. While the VSTS build system <strong>does</strong> allow you to save each edit to the system and include a comment - somewhat like a source control commit - again, this data can't come with you if you change systems. It's also a place to look for changes to your infrastructure <em>other</em> than your primary source control.</li>
</ol>
<p>With those caveats out of the way, let's dive a bit deeper into considerations for the build variables with regard to this project.</p>
<h2 id="naming-build-variables">Naming Build Variables</h2>
<p>In general, it's best to give our build variables descriptive names.
The person defining the build may not always be the person editing or executing the build so it's good practice to ensure someone can tell at a glance what the variables are used for.</p>
<p>The naming convention of existing build variables in VSTS is <a href="https://en.wikipedia.org/wiki/CamelCase"><code>camelCase</code></a>.</p>
<h2 id="allow-at-queue-time">Allow at Queue Time</h2>
<p>Any variable which you'd like to be able to set at each deploy should be marked for <code>Allow at Queue Time</code>.
This ensures you can override the build's default value for this variable at deployment.</p>
<p>This is particularly important for things like passwords, API keys, and names. 
For example, if deploying a test version of the gallery, I may not want to use my production credentials and I may want to identify the resource group as one for testing.</p>
<p>Again though, aside from secrets, these changes <em>should</em> be made in source control and pushed to the repository if we're following best practices.</p>
<h2 id="secrets">Secrets</h2>
<p>Marking a Build Variable as a secret ensures that the variable is encrypted at rest.
For more on the security of secrets in VSTS, see this <a href="https://www.visualstudio.com/en-us/docs/build/define/variables#secret-variables">reference</a>.</p>
<p>We use secrets for our builds because there is some information we do <strong>not</strong> want in source control - namely, passwords and keys.
Source control for internal projects may (should!) have access control policies, but storing passwords or keys in plain text is still probably not the best idea.</p>
<p>For open source projects, passwords and keys <strong>must</strong> be kept secure and outside of source control because there isn't any access control on viewing the source code. </p>
            
                
                    <div id="disqus_thread"></div>
<script>
/**
* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
*/

var disqus_config = function () {
this.page.url = "https://michaeltlombardi.github.io/PSPrivateGalleryWalkthrough/Concepts/Build-Variables/"; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = "Build Variables"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//psprivategallerywalkthrough.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
                
            
        </div>
        
    </div>

    <footer class="col-md-12 text-center">
        <hr>
        
            
            <p><a href="https://github.com/michaeltlombardi/PSPrivateGalleryWalkthrough/tree/master/docs/Concepts\Build-Variables.md" class="icon icon-github"> Edit this page on GitHub</a></p>
            
        
        <p>
        <small>The PSPrivateGalleryWalkthrough project is licensed under the <a href='https://github.com/michaeltlombardi/PSPrivateGalleryWalkthrough/blob/master/LICENSE.md'>MIT license</a><br></small>
        
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
    </footer>

    <script src="../../js/jquery-1.10.2.min.js"></script>
    <script src="../../js/bootstrap-3.0.3.min.js"></script>
    <script src="../../js/tags.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '../..';
    </script>
    <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
    <script src="../../js/base.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
